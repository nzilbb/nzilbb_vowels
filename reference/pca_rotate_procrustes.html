<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Apply Procrustes rotation to PCA loadings and scores. — pca_rotate_procrustes • nzilbb.vowels</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Apply Procrustes rotation to PCA loadings and scores. — pca_rotate_procrustes"><meta name="description" content="It is sometimes convenient to rotate principal components to align PCA
applied to one dataset with PCA applied to another. This function
allows for Procrustes rotation of Principal Components, without scaling.
That is, we rotate and/or flip loadings or scores so that the PCA analyses
to be rotated most closely matches the loadings (or scores) from the target
PCA analysis."><meta property="og:description" content="It is sometimes convenient to rotate principal components to align PCA
applied to one dataset with PCA applied to another. This function
allows for Procrustes rotation of Principal Components, without scaling.
That is, we rotate and/or flip loadings or scores so that the PCA analyses
to be rotated most closely matches the loadings (or scores) from the target
PCA analysis."><meta property="og:image" content="https://nzilbb.github.io/nzilbb_vowels/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nzilbb.vowels</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Model-to-PCA-workflow.html">Model-to-PCA workflow</a></li>
    <li><a class="dropdown-item" href="../articles/Rotation.html">PCA and Rotation</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://joshua.wilsonblack.nz/posts/nzilbb-vowels-0-3-1/">nzilbb.vowels 0.3.1</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nzilbb/nzilbb_vowels/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Apply Procrustes rotation to PCA loadings and scores.</h1>
      <small class="dont-index">Source: <a href="https://github.com/nzilbb/nzilbb_vowels/blob/main/R/pca_rotate_procrustes.R" class="external-link"><code>R/pca_rotate_procrustes.R</code></a></small>
      <div class="d-none name"><code>pca_rotate_procrustes.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>It is sometimes convenient to rotate principal components to align PCA
applied to one dataset with PCA applied to another. This function
allows for Procrustes rotation of Principal Components, without scaling.
That is, we rotate and/or flip loadings or scores so that the PCA analyses
to be rotated most closely matches the loadings (or scores) from the target
PCA analysis.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pca_rotate_procrustes</span><span class="op">(</span></span>
<span>  <span class="va">to_rotate</span>,</span>
<span>  <span class="va">target</span>,</span>
<span>  <span class="va">max_pcs</span>,</span>
<span>  rotate <span class="op">=</span> <span class="st">"loadings"</span>,</span>
<span>  rotation_variables <span class="op">=</span> <span class="st">"all"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-to-rotate">to_rotate<a class="anchor" aria-label="anchor" href="#arg-to-rotate"></a></dt>
<dd><p>an object of class <code>princomp</code> or <code>prcomp</code>.</p></dd>


<dt id="arg-target">target<a class="anchor" aria-label="anchor" href="#arg-target"></a></dt>
<dd><p>an object of class <code>princomp</code> or <code>prcomp</code></p></dd>


<dt id="arg-max-pcs">max_pcs<a class="anchor" aria-label="anchor" href="#arg-max-pcs"></a></dt>
<dd><p>an integer. Rotation will be applied from PC1 up to <code>max_pcs</code>.</p></dd>


<dt id="arg-rotate">rotate<a class="anchor" aria-label="anchor" href="#arg-rotate"></a></dt>
<dd><p>a string, either "loadings" or "scores", to identify whether
the loadings of <code>to_rotate</code> should be aligned with <code>target</code> or the scores
(default: "loadings")</p></dd>


<dt id="arg-rotation-variables">rotation_variables<a class="anchor" aria-label="anchor" href="#arg-rotation-variables"></a></dt>
<dd><p>a string, names of variables to be used in the
rotation. Applied to rotation of loadings when two datasets have only
partial overlap of variables. (default: "all", which uses all variables).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>an object matching the class of <code>to_rotate</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><strong>NB: rotated components are not principal components.</strong> They no longer explain
maximal variance. Rotated components should not be referred to as 'principal
components'. The simplest approach is just to call them 'components' after
describing the rotation. This function modifies objects of the class 'prcomp'
and 'princomp', adding an additional 'note' which collects all the rotations
which have been applied. This allows any plotting function which works with
the outputs of <code><a href="https://rdrr.io/r/stats/prcomp.html" class="external-link">prcomp()</a></code> or <code><a href="https://rdrr.io/r/stats/princomp.html" class="external-link">princomp()</a></code> to work. This may result in plots
which incorrectly identify rotated components as principal components. Be
careful not to include any such plot in a research output.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span>  <span class="co"># PCA on a subset of ONZE speakers</span></span></span>
<span class="r-in"><span>  <span class="va">onze_pca</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/prcomp.html" class="external-link">prcomp</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">onze_intercepts</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">speaker</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    scale <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>   <span class="co"># PCA on all ONZE speakers</span></span></span>
<span class="r-in"><span>   <span class="va">onze_full</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/prcomp.html" class="external-link">prcomp</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">onze_intercepts_full</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">speaker</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    scale <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>   <span class="co"># rotate subset to match loadings of `onze_full`</span></span></span>
<span class="r-in"><span>   <span class="va">rotated_pca</span> <span class="op">&lt;-</span> <span class="va">onze_pca</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>     <span class="fu">pca_rotate_procrustes</span><span class="op">(</span></span></span>
<span class="r-in"><span>       <span class="va">onze_full</span>, max_pcs <span class="op">=</span> <span class="fl">5</span></span></span>
<span class="r-in"><span>     <span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Joshua Wilson Black, James Brand.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

